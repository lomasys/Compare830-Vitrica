{
  "gitSyncId": "69907fc86e9d3f3f72205f7c_4ecb70e1-6c65-48c7-968b-570f56d3391b",
  "id": "Comparador830_qRunInsert",
  "pluginId": "postgres-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "INSERT INTO file_compare_runs (\n  created_by_email,\n  created_by_name,\n  tool_name,\n  compare_type,\n  period_key,\n  year,\n  month,\n  iso_week,\n  year_week,\n  prev_filename,\n  curr_filename,\n  has_differences,\n  differences_count,\n  total_prev,\n  total_curr,\n  total_variation,\n  raw_summary\n)\nVALUES (\n  {{ appsmith.user.email }},\n  {{ appsmith.user.name }},\n  'Comparador 830',\n  '830',\n\n  -- Periodo (cuando se corriÃ³ el comparativo)\n  {{ moment().format(\"YYYY-MM\") }},\n  {{ moment().year() }},\n  {{ moment().month() + 1 }},\n  {{ moment().isoWeek() }},\n  {{ moment().format(\"GGGG-[W]WW\") }},\n\n  -- nombres de archivo (si tu comp los trae)\n  {{ this.params.comp?.prev_filename || this.params.comp?.prevFilename || null }},\n  {{ this.params.comp?.curr_filename || this.params.comp?.currFilename || null }},\n\n  -- resumen de diferencias\n  {{ (Number(this.params.comp?.diferencias_count ?? this.params.comp?.diferenciasCount ?? 0)) > 0 }},\n  {{ Number(this.params.comp?.diferencias_count ?? this.params.comp?.diferenciasCount ?? 0) }},\n\n  -- totales (si tu comp los trae)\n  {{ Number(this.params.comp?.total_prev ?? this.params.comp?.total_anterior ?? this.params.comp?.totalAnterior ?? 0) }},\n  {{ Number(this.params.comp?.total_curr ?? this.params.comp?.total_actual ?? this.params.comp?.totalActual ?? 0) }},\n  {{ Number(this.params.comp?.total_variation ?? this.params.comp?.variacion_total ?? this.params.comp?.variacionTotal ?? 0) }},\n\n  -- JSON crudo completo\n  {{ JSON.stringify(this.params.comp || {}) }}::jsonb\n)\nRETURNING id;\n\n\n\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "Control Tower",
      "isAutoGenerated": false,
      "name": "Control Tower",
      "pluginId": "postgres-plugin"
    },
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "name": "qRunInsert",
    "pageId": "Comparador830",
    "runBehaviour": "MANUAL",
    "userSetOnLoad": false
  }
}